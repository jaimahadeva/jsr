<div style="max-width: 100%;overflow: hidden;">
    <app-menu></app-menu>
</div>
<!-- <div *ngIf="loader" style="width: 100%;height: 100%; background: rgb(149, 150, 149);">
    <div style="position: relative; top: 50%;left: 40%;">
        <button  class="btn btn-primary" type="button" disabled>
            <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
            Data Calling...
          </button>
    </div>
 </div> -->

<div class="sell-products-main-container">
    <div class="product-container" *ngFor="let buyPro of buyNowArray">
        <div class="images-container">
            <div class="dis-flex ratings-on-image">
                <div class="col-white bg-green w-4 dis-flex ratings-txt" style="padding-inline: 38%;">
                    {{buyPro.ratings}} <img class="ratings-img" src="assets/ecommerce/star_ratings.svg" alt="">
                </div>
            </div>
            <div class="dis-flx-jst-cntr" style="width: 100%;">
                <img *ngIf="!buyPro.defaultImage && buyPro.images.length>0" src="{{buyPro.images[0].imagename}}"
                    alt="selected image from view" class="selected-image-height">
                <img *ngIf="buyPro.defaultImage" src="{{buyPro.selectedImage}}" alt="selected image from view"
                    class="selected-image-height">
            </div>

            <div class="small-images-main">
                <div class="sub-images hand" (click)="selectImage(images.imagename ,buyPro)"
                    *ngFor="let images of buyPro.images;let imageindex=index">
                    <div>
                        <img class="hand" src="{{images.imagename}}" style="width: 100%;height: 100%;">
                    </div>
                </div>
            </div>
            <div class="dis-flex-around mar-left-3per mar-top-3per">
                <div class="pad-left-3per">
                    <button class="ecommerce-btn-normal pad-left-3per" (click)="Addtocarts(buyPro)">Add to Cart</button>
                </div>
                <div>
                    <button class="ecommerce-btn-normal pad-left-3per" data-bs-target="#orderConfirmed" data-bs-toggle="modal" (click)="BuyProduct(buyPro)">Buy Now</button>
                </div>
            </div>
        </div>
        <div class="productdetails">
            <div>
                <!-- path -->
                <div class="product-title" id="disceditable">
                    {{buyPro.desciption}}
                </div>
                <div class="dis-flex mar-2 link">
                    <div> visit {{buyPro.store}} </div>
                    <div class="mar-left-1per"> {{buyPro.ratings}} Ratings </div>
                    <div class="mar-left-1per"> {{buyPro.totalansweredquestions}} QnAs</div>
                </div>
            </div>
            <hr>
            <div class="mar-top-1per discout">
                <div class="price">
                    <div> {{buyPro.newprice}} </div>
                    <del class="old-price col-red opa-07">{{buyPro.oldprice}}</del>
                    <div class="discount-txt"> {{buyPro.discount}}% off</div>
                </div>
                <div class="all-taxes"> Inclusive of all taxes </div>
                <div class="Rob-med-14">
                    Total items Available : {{buyPro.itemsLeft}}
                </div>
            </div>
            <hr>
            <!-- offers starts -->
            <div class="offers">
                <div class="dis-flex offers-image">
                    <img class="imagesize" src="assets/ecommerce/icons8-offer.gif" alt="offres">
                    <div class="dis-flex offers-txt"> offers
                    </div>
                </div>
                <div class="offers-cards" id="OffersCard">
                    <div class="offers-card1 mar-left-1per " *ngFor="let offers of buyPro.offers;let offindex=index">
                        <div class="Rob-med-14 offers-heading"> {{offers.name}} </div>
                        <div class="Rob-nor-14"> {{offers.description}}</div>
                    </div>
                </div>
            </div>
            <!-- keyfeatures starts here -->
            <div class="dis-flex">
                <div (click)="slide('left',buyPro.productid)" class="slide-image hand">
                    <img src="assets/ecommerce/left-arrow.svg.svg" alt="scroll the keyfeatures to the left "
                        style="width: 20px;">
                </div>
                <div class="dis-flex  keyFeatures-main" id="{{buyPro.productid}}">
                    <div class="Rob-nor-14  keyfeature1"
                        *ngFor="let keyfeatures of buyPro.keyfeatures;let featureindex=index">
                        <div class="mar-top-1per keafeatures-img">
                            <div>
                                <img src="{{keyfeatures.imagename}}" alt="" style="height: 100%;width: 100%;">
                            </div>
                        </div>
                        <div class="keyfeature-details link">
                            {{keyfeatures.featurename}}
                        </div>
                    </div>
                </div>
                <div (click)="slide('right',buyPro.productid)" class="slide-image hand">
                    <img src="assets/ecommerce/left-arrow.svg.svg" alt="view the next listed keyfeatures"
                        style="width: 20px;">
                </div>
            </div>
            <!-- specifications starts here -->
            <div class="specifications">
                <div class="specific-heading Rob-med-18"> Specifications
                </div>
                <div class="dis-flex specification-details"
                    *ngFor="let speci of buyPro.specifications;let speciIndex=index">
                    <div class="specific-header Rob-med-14"> {{speci.heading}} : </div>
                    <div class="specific-answer Rob-nor-14 mar-left-1per"> {{speci.answer}}</div>
                </div>
            </div>
            <div class="specifications">
                <div class="specific-heading Rob-med-18">
                    About this Product
                </div>
                <div class="dis-flex specification-details">
                    <div class="w-100 Rob-nor-14 mar-inline-3per conte">
                        {{buyPro.aboutthisitem}}
                    </div>
                </div>
            </div>
            <!-- Ratings and reviews starts here -->
            <div class=" mar-top-1per">
                <div class="ratings-and-reviews-main  ">
                    <div class="pd-10 txt-centre">
                        <div class="ratings-given Rob-med-16"> Ratings given :{{buyPro.ratingsgiveby}} </div>
                        <div class="Rob-med-16"> Reviews :{{buyPro.productreviews.length}}</div>
                    </div>
                    <div class="main-ratings-starts pad-left-3per pad-right-3per"
                        *ngFor="let reviews of buyPro.productreviews">
                        <div class="dis-flex ali-items-centr">
                            <div class="bor-50per profile-img-brdr">
                                <img src="assets/ecommerce/myphoto.JPG" alt="reviewers profile"
                                    class="imagesize bor-50per">
                            </div>
                            <div class="Rob-med-14 mar-left-1per dis-flex w-100">
                                <div> {{reviews.overallExperience}}</div>
                                <div class="ratings-img1">
                                    {{reviews.ratings}} <img src="assets/ecommerce/star_ratings.svg" alt=""
                                        style="margin-bottom: 3px;">
                                </div>
                            </div>
                        </div>
                        <div class="Rob-nor-14 mar-top-1per reviews-txt">
                            {{reviews.review}}
                        </div>
                        <div class="mar-top-1per user-reviews-disc opa-07">
                            <div class="Rob-med-14 opa-07 dis-flex"> {{reviews.username}}
                                <img src="assets/ecommerce/green-tick.svg" alt="" style="width: 15px;">
                                <div class="noshow"> Certified Buyer , {{reviews.date}}</div>
                            </div>
                            <div>
                                <i class="fa-regular fa-comment-dots hand "></i>
                                <span class="Rob-nor-10"> {{reviews.replycount}} </span>
                            </div>
                            <div>
                                <i class="fa-solid fa-reply"></i>
                            </div>
                            <div>
                                <i class="fa-solid fa-thumbs-up hand"></i>
                                <span class="Rob-nor-10">
                                    {{reviews.likescount}}
                                </span>
                            </div>
                            <div>
                                <i class="fa-solid fa-thumbs-down  hand"></i>
                                <span class="Rob-nor-10">
                                    {{reviews.dislikescount}}
                                </span>
                            </div>
                        </div>
                        <div class="replies mar-left-3per mar-top-1per">
                            <div>
                                <div class="w-100">
                                    <textarea class="replies-txt" name="replies-txt" id="replied" cols="30" rows="4"
                                        placeholder="Reply to the user"></textarea>
                                </div>
                                <div class="link mar-top-1per">
                                    <button class="transparent-btn Rob-med-14"> Replies</button>
                                </div>
                                <div *ngFor="let repli of reviews.replies">
                                    <div class="dis-flex ali-items-centr mar-top-1per">
                                        <div class="bor-50per profile-img-brdr1">
                                            <img src="assets/ecommerce/myphoto.JPG" alt="reviewers profile"
                                                class="imagesize bor-50per">
                                        </div>
                                        <div class="Rob-med-12 mar-left-1per dis-flex w-100"> {{repli.username}}</div>
                                    </div>
                                    <div class="Rob-nor-14  reviews-txt mar-left-8per">
                                        {{repli.reply}}
                                    </div>
                                    <div class="mar-top-1per user-reviews-disc-replies opa-07">
                                        <div>
                                            <i class="fa-solid fa-reply"></i>
                                        </div>
                                        <div>
                                            <i class="fa-solid fa-thumbs-up hand"></i>
                                            <span class="Rob-nor-10">
                                                {{repli.likescount1}}
                                            </span>
                                        </div>
                                        <div>
                                            <i class="fa-solid fa-thumbs-down  hand"></i>
                                            <span class="Rob-nor-10">
                                                {{repli.dislikescount1}}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- q&As starts here -->
            <div class="mar-top-1per">
                <div class="specific-heading Rob-med-18"> 22 Answered Questions </div>
                <div class="Rob-med-14 specific-heading" *ngFor="let qnas of buyPro.questions;let qindex=index">
                    <div>
                        {{qindex+1}}) {{qnas.question}}
                    </div>
                    <div class="Rob-nor-14 mar-left-3per mar-btm-1per" *ngFor="let ans of qnas.answers">
                        {{ans.answer}}
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div *ngIf="productAddedTocart" class="success-message" [ngClass]="{'success-orange':buyedProduct}">
    <div class="dis-flx-jst-cntr Rob-med-14" >
       {{successMessage}}
    </div>
</div>




<!-- popups -->
<div class="modal fade" id="orderConfirmed" tabindex="-1" role="dialog" aria-labelledby="orderConfirmed"
  style="top: 8%;" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content bg-popup">
      <div class="modal-body txt-centre" >
        <div class="mar-left-40per" style="height: 50px;width: 50px;">
          <img src="assets/ecommerce/green-tick.svg" alt="order successfully placed" class="imagesize">
         </div>
        <div class="mar-top-3per Rob-nor-14">
            Your Order <span class="Rob-med-14">{{this.orderPlaced.desciption}}</span>  has been successfully Placed !!
            Now You can Track the order from <span class="Rob-med-14">Your Orders</span>
        </div>
    </div>
     <hr>
        <div class="dis-flex-around pad-btm-2per">
            <div>
                <button class="ecommerce-shadowbtn-blue bor-rad-10px" data-bs-dismiss="modal"  (click)="gotoOrders()"> Go to Orders </button>
              </div>
            <div>
              <button class="ecommerce-shadowbtn-blue bor-rad-10px" data-bs-dismiss="modal" (click)="confirmedOrder()"> Ok </button>
            </div>
        </div>
   </div>
</div>